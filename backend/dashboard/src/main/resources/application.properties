# === ICICI Direct Breeze API integration (DISABLED - Using Zerodha instead) ===
breeze.api.enabled=${BREEZE_API_ENABLED:false}
breeze.api.appkey=${BREEZE_API_APPKEY:2!T0h64f315119F87^2%8L60245j43p2}
breeze.api.secretkey=${BREEZE_API_SECRETKEY:700U1T8l62632u`oT48`2456M6n62275}
breeze.api.sessiontoken=${BREEZE_API_SESSIONTOKEN:53489091}
# Static IP configuration for Breeze API
breeze.api.static.ip=${BREEZE_API_STATIC_IP:122.167.184.90}
breeze.api.network.interface=${BREEZE_API_NETWORK_INTERFACE:eth0}

# === Public Tunnel / Callback Configuration ===
public.tunnel.url=${PUBLIC_TUNNEL_URL:}

# === Web / CORS Configuration ===
app.cors.allowed-origins=${ALLOWED_ORIGINS:http://localhost:5173}

# === Zerodha Kite API integration (ENABLED - Primary API) ===
zerodha.enabled=${ZERODHA_ENABLED:true}
# API credentials - can be overridden by environment variables
zerodha.apikey=${ZERODHA_API_KEY:hvgaaodyzyhzq57s}
zerodha.apisecret=${ZERODHA_API_SECRET:r6t8jx9lk6xb1vrckgwrqi4owjd2u314}
# Access token is now managed dynamically via ZerodhaSessionService (Redis-backed)
zerodha.access.token=${ZERODHA_ACCESS_TOKEN:}
# Redirect URI for Zerodha OAuth callback
# Prefer PUBLIC_TUNNEL_URL when available; fallback handled in controller
zerodha.redirect.uri=${ZERODHA_REDIRECT_URI:}
# IMPORTANT: This must match the redirect URI in Zerodha app settings
# Provide PUBLIC_TUNNEL_URL to avoid editing application code

# === Mock Data Configuration (DISABLED when Zerodha is enabled) ===
# Mock data is automatically disabled when zerodha.enabled=true
mock.data.enabled=${MOCK_DATA_ENABLED:false}
mock.data.spot.price=${MOCK_SPOT_PRICE:25000}
mock.data.underlying=${MOCK_UNDERLYING:NIFTY}

# Server Port (using 9000 as it's the only open port in development)
server.port=${SERVER_PORT:9000}

# Redis
spring.data.redis.host=${REDIS_HOST:redis}
spring.data.redis.port=${REDIS_PORT:6379}

# Disable Testcontainers when using compose-based redis
spring.testcontainers.enabled=${SPRING_TESTCONTAINERS_ENABLED:false}

logging.level.root=INFO
logging.level.com.zerodha=DEBUG
logging.file.name=logs/zerodha-dashboard.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level %logger{36} - %msg%n
spring.lifecycle.timeout-per-shutdown-phase=30s

redis.snapshot.ttl=PT5M
redis.namespace=zerodha:snapshot:
# Latest snapshot cache configuration
redis.latest.cache.ttl=PT10M
redis.latest.cache.key=zerodha:latest:NIFTY
# Cache update scheduler configuration
# Set to 750ms (0.75s) to match minimum frontend polling rate (0.75s - 7s)
cache.update.enabled=true
cache.update.interval.ms=750
